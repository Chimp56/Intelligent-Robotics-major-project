# dwa_local_planner.yaml
# DWA (Dynamic Window Approach) Local Planner parameters for TurtleBot2
# Optimized for Kobuki base with realistic velocity and acceleration limits

DWAPlannerROS:
  # ========================================================================
  # Robot Configuration Parameters
  # ========================================================================
  
  # Velocity limits (TurtleBot2/Kobuki specifications)
  max_vel_x: 0.22            # Maximum linear velocity (m/s) - TurtleBot2 max ~0.22 m/s
  min_vel_x: 0.0            # Minimum linear velocity (m/s)
  
  max_vel_y: 0.0            # Maximum lateral velocity (m/s) - differential drive = 0
  min_vel_y: 0.0            # Minimum lateral velocity (m/s)
  
  max_vel_trans: 0.22        # Maximum translational velocity (m/s)
  min_vel_trans: 0.11       # Minimum translational velocity (m/s) - prevents slow crawl
  
  max_vel_theta: 1.0        # Maximum angular velocity (rad/s) - TurtleBot2 max ~1.0 rad/s
  min_vel_theta: -1.0       # Minimum angular velocity (rad/s)
  
  # Acceleration limits (TurtleBot2/Kobuki specifications)
  acc_lim_x: 2.5            # Linear acceleration limit (m/s^2)
  acc_lim_y: 0.0            # Lateral acceleration limit (m/s^2) - not applicable
  acc_lim_theta: 3.2        # Angular acceleration limit (rad/s^2)
  acc_lim_trans: 1.0        # Translational acceleration limit (m/s^2)
  
  # ========================================================================
  # Goal Tolerance Parameters
  # ========================================================================
  
  xy_goal_tolerance: 0.05   # Position tolerance (meters) - 5cm accuracy
  yaw_goal_tolerance: 0.17  # Orientation tolerance (radians) - ~10 degrees
  
  # ========================================================================
  # Forward Simulation Parameters
  # ========================================================================
  
  sim_time: 1.7              # Time to simulate forward (seconds)
  sim_granularity: 0.025     # Step size for simulation (meters)
  angular_sim_granularity: 0.1  # Angular step size (radians)
  
  # Velocity sampling
  vx_samples: 6             # Number of linear velocity samples
  vy_samples: 1              # Number of lateral velocity samples (1 for diff drive)
  vtheta_samples: 20         # Number of angular velocity samples
  
  # ========================================================================
  # Trajectory Scoring Parameters
  # ========================================================================
  
  meter_scoring: true        # Use meter-based scoring (vs. grid-based)
  
  # Cost function weights
  pdist_scale: 0.6           # Weight for path distance cost
  gdist_scale: 0.8           # Weight for goal distance cost
  occdist_scale: 0.01        # Weight for obstacle cost
  forward_point_distance: 0.325  # Distance to look ahead (meters)
  
  # Stopping behavior
  stop_time_buffer: 0.2      # Time buffer before stopping (seconds)
  oscillation_reset_dist: 0.05  # Distance to reset oscillation flag (meters)
  
  # ========================================================================
  # Oscillation Prevention Parameters
  # ========================================================================
  
  oscillation_reset_angle: 0.5  # Angle change to reset oscillation (radians)
  oscillation_reset_dist: 0.05  # Distance change to reset oscillation (meters)
  
  # ========================================================================
  # Path Following Parameters
  # ========================================================================
  
  path_distance_bias: 32.0   # Bias for following global path
  goal_distance_bias: 24.0   # Bias for reaching goal
  occdist_scale: 0.01        # Obstacle avoidance weight
  
  # ========================================================================
  # Debugging and Visualization
  # ========================================================================
  
  publish_cost_grid_pc: true  # Publish cost grid as point cloud
  global_frame_id: odom       # Frame for published data
  
  # ========================================================================
  # Advanced Parameters
  # ========================================================================
  
  # Scaling factors for different trajectory costs
  scale_vel: 0.8              # Velocity scaling factor
  scale_acc: 0.8              # Acceleration scaling factor
  scale_vel_theta: 0.8       # Angular velocity scaling factor
  scale_acc_theta: 0.8       # Angular acceleration scaling factor
  
  # Penalty for backwards motion
  penalty_vel: 0.0            # Penalty for linear velocity
  penalty_vel_theta: 0.0     # Penalty for angular velocity
  
  # Goal alignment
  goal_align: true            # Align with goal orientation
  goal_distance: 0.0           # Distance to start aligning (0 = always align)
  
  # Path alignment
  path_align: true             # Align with path orientation
  path_distance: 0.0           # Distance to start aligning (0 = always align)
  
  # Simple trajectory generator (for non-holonomic robots)
  simple_attractor: false      # Use simple attractor (vs. complex)
  
  # ========================================================================
  # Legacy Parameters (for compatibility)
  # ========================================================================
  
  # These are kept for compatibility but may not be used in newer versions
  meter_scoring: true
  simple_attractor: false
